<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>Improving semi-automated export check with a content based approach</title>

    <meta name="description" content="A framework to analyse exports" />
    <meta name="author" content="Titouan Rigaud" />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/black.css" id="theme" />

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />
  </head>

  <body>
    <div class="reveal">
      <div class="slides">
        <section data-background="images/bg-grey.png">
          <h3>Improving semi-automated export check with a content based approach</h3>
          <img
            src="logos/casd_logo.png"
            alt="casd logo"
            class="r-stretch"
            style="
              height: 250px;
              margin: 0 auto 4rem auto;
              background: transparent;
              -webkit-filter: invert(1);
              filter: invert(1);
            "
          />
          <p>
            <small>Yacine El Bouhairi - Titouan Rigaud</small>
          </p>
          <p>
            <small>Eric Debonnel - Florian Sallaberry - Pengfei Liu - C√©dric Hansen</small>
          </p>
        </section>

        <section>
          <section data-background="images/bg-green.png">
            <h2>A bit of context : Trusted Research Environments</h2>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>TRE with manual output checks</h3>
            <img
              src="images/manual.png"
              alt="manual schema"
              class="r-stretch"
              style="margin: 0 auto 4rem auto; background: transparent"
            />
          </section>

          <section data-background="images/bg-grey.png">
            <h3>Checking files is :</h3>
            <ul>
              <li class="fragment">Long for output checkers</li>
              <li class="fragment">Somewhat boring</li>
              <li class="fragment">Long for users</li>
              <li class="fragment">An absolute necessity to guarantee statistical secrecy</li>
            </ul>
          </section>

          <section data-background="images/bg-grey.png">
            <h2>The goal is to automate some checks</h2>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>Theoretical semi-automated system</h3>
            <img
              src="images/automatic.png"
              alt="automatic schema"
              class="r-stretch"
              style="margin: 0 auto 4rem auto; background: transparent"
            />
          </section>

          <section data-background="images/bg-grey.png">
            <h3>The challenges</h3>
            <ul>
              <li class="fragment">Correctly opening files and extract information from them ‚ùì</li>
              <li class="fragment">
              Generate numerical variables from files‚ùì
              </li>
              <li class="fragment">Train models ‚úÖ</li>
              <li class="fragment">Assess performance ‚ùì</li>
              <li class="fragment">
              Assemble everyting together in a single system ‚úÖ
              </li>
            </ul>
          </section>
        </section>

        <section>
          <section data-background="images/bg-green.png">
            <h2>Representing the files and opening them</h2>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>How do you represent a file ?</h3>
            <img
              src="images/file_representation.png"
              alt="Files representation in components"
              class="r-stretch"
              style="margin: 0 auto 4rem auto; background: transparent"
            />
          </section>

          <section data-background="images/bg-grey.png">
            <h3>The content</h3>
            <p>
              A file is a list of components, these components being tables, images or texts, then, we can analyse these "neutral components"
            </p>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>Creating the components</h3>
            <img
              src="images/Fichiers.drawio.png"
              alt="Files representation in components"
              class="r-stretch"
              style="margin: 0 auto 4rem auto; background: transparent"
            />
          </section>

          <section data-background="images/bg-grey.png">
            <h3>‚úÖ‚Äã The simple case for excel ‚úÖ‚Äã</h3>
            <img
              src="images/Cas-simple.jpg"
              alt="Simple case"
              class="r-stretch"
              style="margin: 0 auto 4rem auto; background: transparent"
            />
          </section>

          <section data-background="images/bg-grey.png">
            <h3>‚Äã‚ö†Ô∏è‚Äã The complex case ‚Äã‚ö†Ô∏è‚Äã</h3>
            <img
              src="images/cas-complexe.jpg"
              alt="Complex case"
              class="r-stretch"
              style="margin: 0 auto 4rem auto; background: transparent"
            />
          </section>

          <section data-background="images/bg-grey.png">
            <h3>‚ùå‚Äã The near impossible case ‚ùå‚Äã</h3>
            <img
              src="images/cas-impossible.jpg"
              alt="Impossible case"
              class="r-stretch"
              style="margin: 0 auto 4rem auto; background: transparent"
            />
          </section>

          <section data-background="images/bg-grey.png">
            <h3>‚ö†Ô∏è‚Äã Let's assume components are correctly generated</h3>
            <p>For the remainder of this presentation, we will assume the impossible case did not show up, but it can technically happen</p>
          </section>

        </section>

        <section>
          <section data-background="images/bg-green.png">
            <h2>Generating the features</h2>
            <p>
              Probably the most important part
            </p>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>How do we analyse this table ?</h3>
            <p>Is it safe and why ?</p>
            <img
              src="images/table_simple.png"
              alt="Is a table safe or not ?"
              class="r-stretch"
              style="margin: 0 auto 4rem auto; background: transparent"
            />
          </section>

          <section data-background="images/bg-grey.png">
            <h3>The questions a human controller can ask itself :</h3>
            <ul>
              <li>Does the table contain columns of positive integers ?</li>
              <li>In these columns, do some look like counts of objects/persons ?</li>
              <li>Does these count columns contain values that are under a minimum threshold given by the producer ?</li>
              <li>Does the table contain non aggregated information (data row by row on persons) ?</li>
            </ul>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>Using a mix of LLM and code, it is possible to answer some of these questions</h3>
            <ul>
              <li>Finding positive integers -> üêç‚Äã Code</li>
              <li>Where are the counts of objects/persons -> ‚Äãü§ñ‚Äã AI</li>
              <li>Do counts respect threshold -> üêç‚Äã Code</li>
              <li>Non aggregated information -> ‚Äãü§ñ‚Äã AI and üêç‚Äã Code</li>
            </ul>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>Simplified example of prompt</h3>
            <p>Here is a short extract of the table you need to analyse.
            <p>[...]</p>
            <p>Can you determine which of the columns contain count of individuals ? </p>
            </p>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>Based on the extract, here are the counts</h3>
            <img
              src="images/detect_columns.jpg"
              alt="how to detect columns using an LLM"
              class="r-stretch"
              style="margin: 0 auto 4rem auto; background: transparent"
            />
          </section>

          <section data-background="images/bg-grey.png">
            <h3>Controlling thresholds using Python is now easier</h3>
              <img
                src="images/detect_values.jpg"
                alt="how to detect values using Python code"
                class="r-stretch"
                style="margin: 0 auto 4rem auto; background: transparent"
              />
          </section>

          <section data-background="images/bg-grey.png">
            <h3>Exemple of variables generated from files</h3>
            <ul>
              <li>Extension of the file</li>
              <li>Is the text readable ?</li>
              <li>Does the table contain counts of values that are not aggregated enough ?</li>
              <li>Does the table contain individual data ?</li>
              <li>Can any id be found in the table ?</li>
              <li>...</li>
            </ul>
            </p>
          </section>
        </section>

        <section>
          <section data-background="images/bg-green.png">
            <h2>Training models</h2>
            <p>Some classic machine learning issues</p>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>Model drift</h3>
            <p>A model is at its peak performance when it is just been trained, then the data it was trained on slowly becomes less and less relevant</p>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>What variables do we use ?</h3>
            <ul>
              <li>The ones that are stable across time</li>
              <li>The ones that are founded on content more than metadata</li>
              <li>The ones that have a high correlation with Label</li>
            </ul>
          </section>
          
          <section data-background="images/bg-grey.png">
            <h3>Assessing performance</h3>
            <p>Because a false negative is much more problematic than a false positive, we rely on metrics that allow to put more weight on recall than precision</p>

            <p>We mainly use F3 score and confusion matrix to evaluate the model</p>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>On the test dataset</h3>
            <style type="text/css">
            .tg .tg-0cjc{background-color:#67fd9a;border-color:inherit;text-align:left;vertical-align:top}
            .tg .tg-0pky{border-color:inherit;text-align:left;vertical-align:top}
            .tg .tg-smvl{background-color:#fd6864;border-color:inherit;text-align:left;vertical-align:top}
            .tg .tg-pidv{background-color:#ffce93;border-color:inherit;text-align:left;vertical-align:top}
            </style>
            <table class="tg"><thead>
              <tr>
                <th class="tg-0pky"></th>
                <th class="tg-0pky">Accepted</th>
                <th class="tg-0pky">Refused</th>
              </tr></thead>
            <tbody>
              <tr>
                <td class="tg-0pky">Predicted accepted</td>
                <td class="tg-0cjc">777</td>
                <td class="tg-smvl">9</td>
              </tr>
              <tr>
                <td class="tg-0pky">Predicted refused</td>
                <td class="tg-pidv">107</td>
                <td class="tg-0cjc">157</td>
              </tr>
            </tbody>
          </table>

          <p>F3_Score : 0,87</p>
          </section>
        </section>

        <section>
          <section data-background="images/bg-green.png">
            <h2>Limits to this approach</h2>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>Ai is not perfect</h3>
            <p>There is a balance to be found between very large models and small ones.</p>
            <p>Big models, with more than 15B parameters perform very well, but cost a lot.</p>
            <p>Small models are less precise, but can infer faster, and with a smaller computing power</p>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>Current recommandations towards AI</h3>
            <ul>
              <li>Pick a model with at least 10B parameters</li>
              <li>Ask it to perform small tasks, and help it with code around it</li>
              <li>Format correctly the data to make the tasks simpler</li>
              <li>Provide small amounts of data (maximum  15 columns and 4-5 rows)</li>
            </ul>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>Current recommandations for the whole system</h3>
            <ul>
              <li>Use determinist rules to tackle with simple cases to limit risk</li>
              <li>Labelling the training data as precisely as possible</li>
              <li>Impose some basic rules on exports, while keeping at as open as possible for users</li>
            </ul>
          </section>
        </section>

        <section>
          <section data-background="images/bg-green.png">
            <h2>Future work</h2>
            <p>What can we do to improve this further?</p>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>Continous training</h3>
            <ul>
              <li class="fragment">Detecting data shifting</li>
              <li class="fragment">New features using Large Language Models (ChatGPT like infrastructures self-hosted)</li>
            </ul>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>Other ideas</h3>
            <ul>
              <li class="fragment">Using more data to train, to vary the examples and make the model more robust</li>
              <li class="fragment">Improve the openers to solve issues related to components generation</li>
            </ul>
          </section>

          <section data-background="images/bg-grey.png">
            <h3>One last thing</h3>
            <p>Building your model on content based features allows to create useful reports :</p>
            <img
              src="images/report.png"
              alt="Reporting technology"
              class="r-stretch"
              style="margin: 0 auto 4rem auto; background: transparent"
            />
          </section>
        </section>

        <section>
          <section data-background="images/bg-green.png">
            <h2>Merci !</h2>
            <p>Contact : titouan.rigaud@casd.eu</p>
          </section>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/zoom/zoom.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/search/search.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      Reveal.initialize({
        controls: true,
        progress: true,
        center: true,
        hash: true,

        plugins: [
          RevealZoom,
          RevealNotes,
          RevealSearch,
          RevealMarkdown,
          RevealHighlight,
        ],
      });
    </script>
  </body>
</html>
